// ==UserScript==
// @name BadooNearbyAutolike
// @author nemanjan00
// @include https://badoo.com/*
// @include https://*.badoo.com/*
// @include http://badoo.com/*
// @include http://*.badoo.com/*
// @downloadURL https://raw.githubusercontent.com/nemanjan00/BadooNearbyLike/master/badoo.user.js
// @namespace https://github.com/nemanjan00/BadooNearbyAutolike
// @updateURL https://raw.githubusercontent.com/nemanjan00/BadooNearbyLike/master/badoo.user.js
// @version 7
// ==/UserScript==

var code = atob("d2luZG93Lm9wZW5lciA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJvcGVuZXIiKSB8fCAiS2FrbyBvdm8gcmFkaSwgamVzbW8gbGkgc2FkIHUgdmV6aT8gOjMiOw0KDQp3aW5kb3cuYm90ID0gew0KCWdldENoYXQ6IGZ1bmN0aW9uKGlkKXsNCgkJdmFyIHVybCA9ICIvYXBpLnBodG1sP1NFUlZFUl9PUEVOX01FU1NFTkdFUiI7DQoNCgkJdmFyIGJvZHkgPSB7InZlcnNpb24iOjEsIm1lc3NhZ2VfdHlwZSI6NDY4LCJtZXNzYWdlX2lkIjo0MSwiYm9keSI6W3sibWVzc2FnZV90eXBlIjo0NjgsInNlcnZlcl9vcGVuX21lc3NlbmdlciI6eyJjb250YWN0c191c2VyX2ZpZWxkX2ZpbHRlciI6eyJwcm9qZWN0aW9uIjpbMzMwLDIwMCw3MDAsNTgwLDY0MCw2MDAsNjEwLDI1MCwzNDAsMjgwLDIzMCw2NTAsODAwLDUwMV0sInByb2ZpbGVfcGhvdG9fc2l6ZSI6eyJzcXVhcmVfZmFjZV9waG90b19zaXplIjp7IndpZHRoIjoxMDAsImhlaWdodCI6MTAwfX19LCJjaGF0X3VzZXJfZmllbGRfZmlsdGVyIjp7InByb2plY3Rpb24iOlszMzAsMzMxLDIwMCw3MDAsNTgwLDY0MCw2MDAsNjEwLDI1MCwzNDAsMjgwLDI5MCwyOTEsMzEwLDMwMSwzMDIsNjgwLDMwMywzMDQsMjEwLDIzMCw3MzEsNjUwLDU3MF0sInByb2ZpbGVfcGhvdG9fc2l6ZSI6eyJzcXVhcmVfZmFjZV9waG90b19zaXplIjp7IndpZHRoIjozMDAsImhlaWdodCI6MzAwfX19LCJpbml0aWFsX3NjcmVlbl91c2VyX2ZpZWxkX2ZpbHRlciI6eyJwcm9qZWN0aW9uIjpbNDEwLDQ5MCw0NzEsODAwXSwidW5pdGVkX2ZyaWVuZHNfZmlsdGVyIjpbeyJzZWN0aW9uX3R5cGUiOjF9XX0sInVzZXJfaWQiOmlkfX1dfTsNCg0KCQl2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkgew0KCQkJYm90Ll9zZW5kUmVxdWVzdCh1cmwsIGJvZHkpLnRoZW4oZnVuY3Rpb24oY2hhdCl7DQoJCQkJY2hhdCA9IGNoYXQuYm9keVswXS5jbGllbnRfb3Blbl9tZXNzZW5nZXIuYWN0aXZlX2NoYXQuaW5pdGlhbF9jaGF0X3NjcmVlbjsNCgkJCQkNCgkJCQlyZXNvbHZlKGNoYXQgIT0gdW5kZWZpbmVkICYmIGNoYXQudHlwZSA9PSAyKTsNCgkJCX0pOw0KCQl9KTsNCgkJcmV0dXJuIHByb21pc2U7DQoJfSwNCglzZW5kTWVzc2FnZTogZnVuY3Rpb24oaWQpew0KCQl2YXIgdXJsID0gIi9hcGkucGh0bWw/U0VSVkVSX1NFTkRfQ0hBVF9NRVNTQUdFIjsNCg0KCQl2YXIgYm9keSA9IHsidmVyc2lvbiI6MSwibWVzc2FnZV90eXBlIjoxMDQsIm1lc3NhZ2VfaWQiOjE0LCJib2R5IjpbeyJtZXNzYWdlX3R5cGUiOjEwNCwiY2hhdF9tZXNzYWdlIjp7Im1zc2ciOndpbmRvdy5vcGVuZXIsIm1lc3NhZ2VfdHlwZSI6MSwidWlkIjoiMTQ4NDE4Nzk3ODUyMCIsImZyb21fcGVyc29uX2lkIjoiMjI3NTYyMjI0IiwidG9fcGVyc29uX2lkIjppZCwicmVhZCI6ZmFsc2UsImNoYXRfYmxvY2tfaWQiOjJ9fV19Ow0KDQoJCXZhciBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7DQoJCQlib3QuX3NlbmRSZXF1ZXN0KHVybCwgYm9keSkudGhlbihmdW5jdGlvbih1c2VyKXsNCgkJCQlyZXNvbHZlKHRydWUpOw0KCQkJfSk7DQoJCX0pOw0KCQlyZXR1cm4gcHJvbWlzZTsNCgl9LA0KCWdldFVzZXI6IGZ1bmN0aW9uKGlkKXsNCgkJdmFyIHVybCA9ICIvYXBpLnBodG1sP1NFUlZFUl9HRVRfVVNFUiI7DQoNCgkJdmFyIGJvZHkgPSB7IiRncGIiOiJiYWRvby5ibWEuQmFkb29NZXNzYWdlIiwidmVyc2lvbiI6MSwibWVzc2FnZV90eXBlIjo0MDMsIm1lc3NhZ2VfaWQiOjYsImJvZHkiOlt7IiRncGIiOiJiYWRvby5ibWEuTWVzc2FnZUJvZHkiLCJtZXNzYWdlX3R5cGUiOjQwMywic2VydmVyX2dldF91c2VyIjp7IiRncGIiOiJiYWRvby5ibWEuU2VydmVyR2V0VXNlciIsInVzZXJfaWQiOmlkLCJjbGllbnRfc291cmNlIjoyLCJ1c2VyX2ZpZWxkX2ZpbHRlciI6eyIkZ3BiIjoiYmFkb28uYm1hLlVzZXJGaWVsZEZpbHRlciIsInByb2plY3Rpb24iOls4MDAsMzcwLDIwMCwyMzAsMjEwLDMwLDM2MCw5MywzMDEsMzAyLDY4MCwzMDMsMzA0LDI1MCw2MDAsMjkwLDI5MSw2MTAsMzEwLDY5MCw2OTEsNjkyLDY5Myw0NDAsMzExLDQ5MCw2NjAsNjUwLDQ2MCw3NTAsNzMxLDczMCwxMDAsMzQwLDU4MCw1NzAsNDEwLDQyMCw0ODAsOTAsNDcwLDc0Miw3NDEsNzQwLDU1MCw2ODEsNjcwLDg3MCwzMzAsMzMxLDI2MCw1MzAsNTQwXSwicmVxdWVzdF9hbGJ1bXMiOlt7IiRncGIiOiJiYWRvby5ibWEuU2VydmVyR2V0QWxidW0iLCJwcmV2aWV3X3NpemUiOnsiJGdwYiI6ImJhZG9vLmJtYS5QaG90b1NpemUiLCJoZWlnaHQiOjE4MCwid2lkdGgiOjE4MH0sImFsYnVtX3R5cGUiOjJ9LHsiJGdwYiI6ImJhZG9vLmJtYS5TZXJ2ZXJHZXRBbGJ1bSIsInByZXZpZXdfc2l6ZSI6eyIkZ3BiIjoiYmFkb28uYm1hLlBob3RvU2l6ZSIsImhlaWdodCI6MTgwLCJ3aWR0aCI6MTgwfSwiYWxidW1fdHlwZSI6NH1dLCJ1bml0ZWRfZnJpZW5kc19maWx0ZXIiOlt7IiRncGIiOiJiYWRvby5ibWEuVW5pdGVkRnJpZW5kc0ZpbHRlciIsImNvdW50Ijo1LCJzZWN0aW9uX3R5cGUiOjN9LHsiJGdwYiI6ImJhZG9vLmJtYS5Vbml0ZWRGcmllbmRzRmlsdGVyIiwiY291bnQiOjUsInNlY3Rpb25fdHlwZSI6MX0seyIkZ3BiIjoiYmFkb28uYm1hLlVuaXRlZEZyaWVuZHNGaWx0ZXIiLCJjb3VudCI6NSwic2VjdGlvbl90eXBlIjoyfV0sInJlcXVlc3RfaW50ZXJlc3RzIjp7IiRncGIiOiJiYWRvby5ibWEuU2VydmVySW50ZXJlc3RzR2V0IiwidXNlcl9pZCI6aWQsImxpbWl0Ijo1MDB9fSwidmlzaXRpbmdfc291cmNlIjp7IiRncGIiOiJiYWRvby5ibWEuUHJvZmlsZVZpc2l0aW5nU291cmNlIiwicGVyc29uX2lkIjppZCwic291cmNlX2ZvbGRlciI6MjUsInZpc2l0aW5nX3NvdXJjZSI6Mn19fV19Ow0KDQoJCXZhciBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7DQoJCQlib3QuX3NlbmRSZXF1ZXN0KHVybCwgYm9keSkudGhlbihmdW5jdGlvbih1c2VyKXsNCgkJCQl1c2VyID0gdXNlci5ib2R5WzBdLnVzZXI7DQoNCgkJCQlyZXNvbHZlKHVzZXIpOw0KCQkJfSk7DQoJCX0pOw0KCQlyZXR1cm4gcHJvbWlzZTsNCgl9LA0KDQoJZ2V0VXNlcnM6IGZ1bmN0aW9uKHBhZ2UgPSAwKXsNCgkJdmFyIHVybCA9ICIvYXBpLnBodG1sP1NFUlZFUl9HRVRfVVNFUl9MSVNUX1dJVEhfU0VUVElOR1MiOw0KDQoJCWJvZHkgPSB7DQoJCQkidmVyc2lvbiI6MSwNCgkJCSJtZXNzYWdlX3R5cGUiOjQxNiwNCgkJCSJtZXNzYWdlX2lkIjoyNCwNCgkJCSJib2R5Ijpbew0KCQkJCSJtZXNzYWdlX3R5cGUiOjUwMiwNCgkJCQkic2VydmVyX2dldF9zZWFyY2hfc2V0dGluZ3MiOnsNCgkJCQkJImNvbnRleHRfdHlwZSI6Mg0KCQkJCX0NCgkJCX0sew0KCQkJCSJtZXNzYWdlX3R5cGUiOjI0NSwNCgkJCQkic2VydmVyX2dldF91c2VyX2xpc3QiOnsNCgkJCQkJImZvbGRlcl9pZCI6MjUsDQoJCQkJCSJ1c2VyX2ZpZWxkX2ZpbHRlciI6ew0KCQkJCQkJInByb2plY3Rpb24iOlsyNTAsMjAwLDIxMCwyMzAsMzEwLDMzMCw1MzAsNTQwLDM0MCwzMzEsNjgwLDI5MCwyOTEsMzAxLDMwMywzMDQsMzAyLDI2MF0sDQoJCQkJCQkicHJvZmlsZV9waG90b19zaXplIjp7DQoJCQkJCQkJInNxdWFyZV9mYWNlX3Bob3RvX3NpemUiOnsNCgkJCQkJCQkJIndpZHRoIjoxODAsDQoJCQkJCQkJCSJoZWlnaHQiOjE4MA0KCQkJCQkJCX0NCgkJCQkJCX0NCgkJCQkJfSwNCgkJCQkJIm9mZnNldCI6cGFnZSoxMDAsDQoJCQkJCSJwcmVmZXJyZWRfY291bnQiOjEwMCwNCgkJCQkJInByb21vX2Jsb2NrX3JlcXVlc3RfcGFyYW1zIjpbeyJjb3VudCI6MSwicG9zaXRpb24iOjJ9LHsiY291bnQiOjEsInBvc2l0aW9uIjoxfV0sDQoJCQkJCSJmaWx0ZXIiOlswXQ0KCQkJCX0NCgkJCX1dDQoJCX07DQoNCgkJdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHsNCgkJCWJvdC5fc2VuZFJlcXVlc3QodXJsLCBib2R5KS50aGVuKGZ1bmN0aW9uKHVzZXJzKXsNCgkJCQl2YXIgcGFnZV9jb3VudCA9IHVzZXJzLmJvZHlbMV0uY2xpZW50X3VzZXJfbGlzdC50b3RhbF9jb3VudCAvIDEwMDsNCgkJCQl1c2VycyA9IHVzZXJzLmJvZHlbMV0uY2xpZW50X3VzZXJfbGlzdC5zZWN0aW9uWzBdLnVzZXJzOw0KDQoJCQkJaWYocGFnZSA9PSAwKXsNCgkJCQkJcHJvbWlzZXMgPSBbXTsNCg0KCQkJCQlmb3IoaSA9IDE7IGkgPCBwYWdlX2NvdW50OyBpKyspew0KCQkJCQkJcHJvbWlzZXMucHVzaChib3QuZ2V0VXNlcnMoaSkpOw0KCQkJCQl9DQoNCgkJCQkJUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24obW9yZV91c2Vycyl7DQoJCQkJCQltb3JlX3VzZXJzLmZvckVhY2goZnVuY3Rpb24obW9yZV91c2Vyc191bml0KXsNCgkJCQkJCQl1c2VycyA9IHVzZXJzLmNvbmNhdChtb3JlX3VzZXJzX3VuaXQpOw0KCQkJCQkJfSk7DQoNCgkJCQkJCXJlc29sdmUodXNlcnMpOw0KCQkJCQl9KTsNCgkJCQl9DQoJCQkJZWxzZQ0KCQkJCXsNCgkJCQkJcmVzb2x2ZSh1c2Vycyk7DQoJCQkJfQ0KCQkJfSk7DQoJCX0pOw0KDQoJCXJldHVybiBwcm9taXNlOw0KCX0sDQoNCgl2b3RlOiBmdW5jdGlvbihpZCl7DQoJCXZhciB1cmwgPSAiL2FwaS5waHRtbD9TRVJWRVJfRU5DT1VOVEVSU19WT1RFIjsNCg0KCQl2YXIgYm9keSA9IHsiJGdwYiI6ImJhZG9vLmJtYS5CYWRvb01lc3NhZ2UiLCJ2ZXJzaW9uIjoxLCJtZXNzYWdlX3R5cGUiOjgwLCJtZXNzYWdlX2lkIjo1NiwiYm9keSI6W3siJGdwYiI6ImJhZG9vLmJtYS5NZXNzYWdlQm9keSIsIm1lc3NhZ2VfdHlwZSI6ODAsInNlcnZlcl9lbmNvdW50ZXJzX3ZvdGUiOnsiJGdwYiI6ImJhZG9vLmJtYS5TZXJ2ZXJFbmNvdW50ZXJzVm90ZSIsInBlcnNvbl9pZCI6aWQsInZvdGUiOjIsInZvdGVfc291cmNlIjo2NX19XX07DQoNCgkJcmV0dXJuIHRoaXMuX3NlbmRSZXF1ZXN0KHVybCwgYm9keSk7DQoJfSwNCg0KCV9zZW5kUmVxdWVzdCh1cmwsIGJvZHkpew0KCQl2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkgew0KCQkJdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOw0KCQkJeGhyLm9wZW4oJ1BPU1QnLCB1cmwsIHRydWUpOw0KCQkJeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICdqc29uJyk7DQoNCgkJCXhoci5zZXRSZXF1ZXN0SGVhZGVyKCdYLVNlc3Npb24taWQnLCBCLlNlc3Npb24uZ2V0U2Vzc2lvbklkKCkpOw0KCQkJeGhyLnNldFJlcXVlc3RIZWFkZXIoJ1gtVXNlci1pZCcsIEIuU2Vzc2lvbi5nZXRVc2VySWQoKSk7DQoNCgkJCXhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSAoZnVuY3Rpb24oKSB7DQoJCQkJaWYgKHhoci5yZWFkeVN0YXRlID09IFhNTEh0dHBSZXF1ZXN0LkRPTkUpIHsNCgkJCQkJcmVzb2x2ZShKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpKTsNCgkJCQl9DQoJCQl9KTsNCg0KCQkJeGhyLnNlbmQoSlNPTi5zdHJpbmdpZnkoYm9keSkpOw0KCQl9KTsNCg0KCQlyZXR1cm4gcHJvbWlzZTsNCgl9LA0KDQoJYWRkTWVudUl0ZW06IGZ1bmN0aW9uKHRleHQsIGljb24sIGJvdEZ1bmN0aW9uTmFtZSkgew0KCQl2YXIgaHRtbCA9ICdcDQoJCSAgICA8ZGl2IG9uY2xpY2s9IndpbmRvdy5ib3Que3tib3RGdW5jdGlvbk5hbWV9fSgpOyIgc3R5bGU9ImN1cnNvcjogcG9pbnRlciIgY2xhc3M9InNpZGViYXItbWVudV9faXRlbSBmcmllbmRzXyI+XA0KCQkJCTxpIGNsYXNzPSJpY29uIGljb24tLXhzbSI+XA0KCQkJCQk8c3ZnIGNsYXNzPSJpY29uLXN2ZyI+PHVzZSB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeGxpbms6aHJlZj0ie3tpY29ufX0iPjwvdXNlPjwvc3ZnPlwNCgkJCQkJPHNwYW4gY2xhc3M9Im1hcmsgbWFyay0tc20gbWFyay0tcmVkIGludmlzaWJsZSI+MDwvc3Bhbj5cDQoJCQkJPC9pPlwNCgkJCQk8YiBjbGFzcz0ic2lkZWJhci1tZW51X19pdGVtLXR4dCBzaWRlYmFyX19lbC1oaWRkZW4iPnt7dGV4dH19PC9iPlwNCgkJCQk8c3BhbiBjbGFzcz0ibWFyayBtYXJrLS1yZWQgaW52aXNpYmxlIj4wPC9zcGFuPlwNCgkJCTwvZGl2Pic7DQoJCQ0KCQlodG1sID0gaHRtbA0KCQkJLnJlcGxhY2UoJ3t7Ym90RnVuY3Rpb25OYW1lfX0nLCBib3RGdW5jdGlvbk5hbWUpDQoJCQkucmVwbGFjZSgne3tpY29ufX0nLCBpY29uKQ0KCQkJLnJlcGxhY2UoJ3t7dGV4dH19JywgdGV4dCk7DQoNCgkJdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCgkJZWxlbWVudC5pbm5lckhUTUwgPSBodG1sOw0KCQkNCgkJdmFyIG1lbnUgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJzaWRlYmFyLW1lbnUiKVswXTsNCgkJbWVudS5hcHBlbmRDaGlsZChlbGVtZW50KTsNCgl9LA0KCQ0KCWFkZFRvTWVudUxpa2UoKXsNCgkJYm90LmFkZE1lbnVJdGVtKCdNYXNzIGxpa2UnLCAnI2ljb24taGVhcnQnLCAnbWFzc0xpa2UnKTsNCgl9LA0KDQoJYWRkVG9NZW51Q2hhdCgpew0KCQlib3QuYWRkTWVudUl0ZW0oJ01hc3MgY2hhdCcsICcjaWNvbi1jaGF0JywgJ21hc3NDaGF0Jyk7DQoJfSwNCg0KCWFkZFRvTWVudU9wZW5lcigpew0KCQlib3QuYWRkTWVudUl0ZW0oJ1NldCBvcGVuZXInLCAnI2ljb24tY2hhdCcsICdzZXRPcGVuZXInKTsNCgl9LA0KDQoJc2V0T3BlbmVyOiBmdW5jdGlvbigpew0KCQl2YXIgb3BlbmVyID0gcHJvbXB0KCJPcGVuZXI/ICIsIHdpbmRvdy5vcGVuZXIpOw0KDQoJCXdpbmRvdy5vcGVuZXIgPSBvcGVuZXI7DQoJCWxvY2FsU3RvcmFnZS5zZXRJdGVtKCJvcGVuZXIiLCBvcGVuZXIpOw0KCX0sDQoNCgltYXNzTGlrZTogZnVuY3Rpb24oKXsNCgkJYm90LmdldFVzZXJzKCkudGhlbihmdW5jdGlvbihkYXRhKXsNCgkJCXVzZXJzID0gZGF0YS5maWx0ZXIoZnVuY3Rpb24odXNlcil7cmV0dXJuIHVzZXIub25saW5lX3N0YXR1c190ZXh0ICE9ICJvbmxpbmVfc3RhdHVzX3RleHQiICYmIHVzZXIub25saW5lX3N0YXR1c190ZXh0ICE9ICJCaWxhIGplIG5hIG1yZcW+aSBwcmUgdmnFoWUgb2QgbmVkZWxqdSBkYW5hIiAmJiB1c2VyLm9ubGluZV9zdGF0dXNfdGV4dCAhPSAiIFdhcyBvbmxpbmUgbW9yZSB0aGFuIGEgd2VlayBhZ28ifSk7DQoNCgkJCXVzZXJzID0gdXNlcnMubWFwKGZ1bmN0aW9uKHVzZXIpe3JldHVybiB1c2VyLnVzZXJfaWR9KTsNCg0KCQkJdXNlcnMgPSB1c2Vycy5maWx0ZXIoZnVuY3Rpb24odXNlcil7DQoJCQkJaWYobG9jYWxTdG9yYWdlLmdldEl0ZW0oInVzZXItIit1c2VyKSAhPSB1bmRlZmluZWQpew0KCQkJCQlyZXR1cm4gZmFsc2U7DQoJCQkJfQ0KDQoJCQkJcmV0dXJuIHRydWU7DQoJCQl9KTsNCg0KCQkJdXNlcnMgPSB1c2Vycy5zbGljZSgwLCAxMDApOw0KDQoJCQl2YXIgdXNlckRldGFpbHNQcm9taXNlcyA9IHVzZXJzLm1hcChmdW5jdGlvbih1c2VyX2lkKXsNCgkJCQlyZXR1cm4gYm90LmdldFVzZXIodXNlcl9pZCk7DQoJCQl9KTsNCg0KCQkJUHJvbWlzZS5hbGwodXNlckRldGFpbHNQcm9taXNlcykudGhlbihmdW5jdGlvbih1c2Vycyl7DQoJCQkJdmFyIGNhcHRjaGEgPSBmYWxzZTsNCg0KCQkJCXVzZXJzID0gdXNlcnMuZmlsdGVyKGZ1bmN0aW9uKHVzZXIpew0KCQkJCQlpZih1c2VyID09IHVuZGVmaW5lZCl7DQoJCQkJCQljYXB0Y2hhID0gdHJ1ZTsNCgkJCQkJCXJldHVybiBmYWxzZTsNCgkJCQkJfQ0KCQkJCQllbHNlIGlmKHVzZXIubXlfdm90ZSA9PSAxKXsNCgkJCQkJCXJldHVybiB0cnVlOw0KCQkJCQl9DQoJCQkJCWVsc2UNCgkJCQkJew0KCQkJCQkJbG9jYWxTdG9yYWdlLnNldEl0ZW0oInVzZXItIiArIHVzZXIudXNlcl9pZCwgdHJ1ZSk7DQoNCgkJCQkJCXJldHVybiBmYWxzZTsNCgkJCQkJfQ0KCQkJCX0pOw0KDQoJCQkJaWYoY2FwdGNoYSl7DQoJCQkJCWFsZXJ0KCJTb2x2ZSBjYXB0Y2hhISAiKTsNCgkJCQkJcmV0dXJuOw0KCQkJCX0NCg0KCQkJCWNvbnNvbGUubG9nKHVzZXJzLmxlbmd0aCArICIgdXNlcnMgdG8gbGlrZSEgIik7DQoNCgkJCQlsaWtlX3Byb21pc2VzID0gdXNlcnMubWFwKGZ1bmN0aW9uKHVzZXIpe3JldHVybiBib3Qudm90ZSh1c2VyLnVzZXJfaWQpfSk7DQoNCgkJCQlQcm9taXNlLmFsbChsaWtlX3Byb21pc2VzKS50aGVuKGZ1bmN0aW9uKGRhdGEpew0KCQkJCQl2YXIgbGlrZXNfY291bnQgPSAwOw0KDQoJCQkJCWRhdGEuZm9yRWFjaChmdW5jdGlvbihsaWtlLCBrZXkpew0KCQkJCQkJaWYobGlrZS5ib2R5WzBdLm1lc3NhZ2VfdHlwZSAhPSAxKXsNCgkJCQkJCQlsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgidXNlci0iICsgdXNlcnNba2V5XS51c2VyX2lkLCB0cnVlKTsNCg0KCQkJCQkJCWxpa2VzX2NvdW50Kys7DQoJCQkJCQl9DQoJCQkJCX0pOw0KDQoJCQkJCWFsZXJ0KCJMaWtlZCAiICsgbGlrZXNfY291bnQgKyAiIHVzZXJzISAiKTsNCgkJCQl9KTsNCgkJCX0pOw0KCQl9KTsNCgl9LA0KDQoJbWFzc0NoYXQ6IGZ1bmN0aW9uKCl7DQoJCWJvdC5nZXRVc2VycygpLnRoZW4oZnVuY3Rpb24oZGF0YSl7DQoJCQl1c2VycyA9IGRhdGEuZmlsdGVyKGZ1bmN0aW9uKHVzZXIpe3JldHVybiB1c2VyLm9ubGluZV9zdGF0dXNfdGV4dCAhPSAib25saW5lX3N0YXR1c190ZXh0IiAmJiB1c2VyLm9ubGluZV9zdGF0dXNfdGV4dCAhPSAiQmlsYSBqZSBuYSBtcmXFvmkgcHJlIHZpxaFlIG9kIG5lZGVsanUgZGFuYSIgJiYgdXNlci5vbmxpbmVfc3RhdHVzX3RleHQgIT0gIiBXYXMgb25saW5lIG1vcmUgdGhhbiBhIHdlZWsgYWdvIn0pOw0KDQoJCQl1c2VycyA9IHVzZXJzLm1hcChmdW5jdGlvbih1c2VyKXtyZXR1cm4gdXNlci51c2VyX2lkfSk7DQoNCgkJCXZhciBjaGF0cyA9IHVzZXJzLm1hcChmdW5jdGlvbihpZCl7DQoJCQkJcmV0dXJuIGJvdC5nZXRDaGF0KGlkKTsNCgkJCX0pOw0KDQoJCQlQcm9taXNlLmFsbChjaGF0cykudGhlbihmdW5jdGlvbihjaGF0cyl7DQoJCQkJdXNlcnMgPSB1c2Vycy5maWx0ZXIoZnVuY3Rpb24oaWQsIGtleSl7DQoJCQkJCXJldHVybiBjaGF0c1trZXldOw0KCQkJCX0pOw0KDQoJCQkJYWxlcnQoIlNlbmRpbmcgbWVzc2FnZSB0byAiK3VzZXJzLmxlbmd0aCsiIHBlb3BsZSEgIik7DQoNCgkJCQl1c2Vycy5tYXAoZnVuY3Rpb24oaWQpew0KCQkJCQlib3Quc2VuZE1lc3NhZ2UoaWQpOw0KCQkJCX0pDQoJCQl9KTsNCgkJfSk7DQoJfQ0KfTsNCg0KdmFyIGludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXsNCglpZihkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJzaWRlYmFyLW1lbnUiKVswXSAhPT0gdW5kZWZpbmVkKXsNCgkJY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7DQoJCWJvdC5hZGRUb01lbnVMaWtlKCk7DQoJCWJvdC5hZGRUb01lbnVDaGF0KCk7DQoJCWJvdC5hZGRUb01lbnVPcGVuZXIoKTsNCgl9DQp9LCAxMDAwKTsNCg==");

location.href="javascript:(function(){" + code + "})()";

